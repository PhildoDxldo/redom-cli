!function(){"use strict";function e(e,t){for(var n,i,r,u=0,d=0,l=0,a=e.length;l<=a;l++){var f=l===a?0:e.charCodeAt(l);if(35===f||46===f||0===f){if(0===u)n=0===l?"div":0===f?e:e.substring(d,l);else{var s=e.substring(d,l);1===u?i=s:r?r+=" "+s:r=s}d=l+1,u=35===f?1:2}}if(t)var v=o.createElementNS(t,n);else var v=o.createElement(n);return i&&(v.id=i),r&&(v.className=r),v}function t(t,n){var i=arguments;if("function"==typeof t){var r=arguments.length-1;if(r>1){for(var d=new Array(r),l=0;l<r;)d[++l]=i[l];return new(t.bind.apply(t,d))}return new t(n)}for(var a=(u[t]||(u[t]=e(t))).cloneNode(!1),f=!0,l=1;l<arguments.length;l++){for(var s=i[l];"function"==typeof s;)s=s(a);if(null!=s)if(s.nodeType)a.appendChild(s);else if("string"==typeof s||"number"==typeof s)f?a.textContent=s:a.appendChild(o.createTextNode(s));else if(s.el&&s.el.nodeType){var v=s,p=s.el;v!==p&&(v.el=p,p.__redom_view=v),v.isMounted?v.remounted&&v.remounted():v.mounted&&v.mounted(),a.appendChild(p)}else for(var h in s){var c=s[h];if("style"===h){if("string"==typeof c)a.setAttribute(h,c);else for(var m in c)a.style[m]=c[m];a[h]=c}else h in a||"function"==typeof c?(a[h]=c,"autofocus"===h&&a.focus()):a.setAttribute(h,c)}}return a}function n(e,t,n,r){return new i(e,t,n,r)}function i(e,n,i,r){this.View=n,this.key=i,this.initData=r,this.views=[],this.el="string"==typeof e?t(e):e,i&&(this.lookup={})}function r(e,t,n){if(null!=t){var i=e.el||e,r=t.el||t;if(r.nodeType)return t!==r&&(r.view=t),n?i.insertBefore(r,n.el||n):i.appendChild(r),t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted()),!0;if(t.length){for(var o=0;o<t.length;o++){var r=t.el||t;t.isMounted?t.remounted&&t.remounted():(t.isMounted=!0,t.mounted&&t.mounted())}return!0}return!1}}var o=document,u={};t.extend=function(e){return t.bind(this,e)},i.extend=function(e,t,n,r){return i.bind(i,e,t,n,r)},n.extend=i.extend,i.prototype.update=function(e){var t=this.View,n=this.key,i=this.initData,r=this.views,o=this.el,u=o.firstChild;if(n)var d=this.lookup;for(var l=0;l<e.length;l++){var a=e[l];if(n){var f="function"==typeof n?n(a):a[n],s=r[l]=d[f]||(d[f]=new t(i,a,l));s.__id=f}else var s=r[l]||(r[l]=new t(i,a,l));var v=s.el;s.el=v,v.__redom_view=s,s.update&&s.update(a),u!==v?(u?o.insertBefore(v,u):o.appendChild(v),s.isMounted?s.remounted&&s.remounted():(s.isMounted=!0,s.mounted&&s.mounted())):u=u.nextSibling}for(;u;){var p=u.nextSibling;if(n){var s=u.__redom_view;if(s){var f=s.__id;d[f]=null}}r[l++]=null,o.removeChild(u),u=p}r.length=e.length};var d=t("h1","Hello world!");r(document.body,d);var l=function(){this.el=t("td")};l.prototype.update=function(e){this.el.textContent=e};var a=n.extend("tr",l),f=n.extend("table",a),s=new f;r(document.body,s),s.update([[1,2,3],[4,5,6],[7,8,9]])}();